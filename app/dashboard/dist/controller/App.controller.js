sap.ui.define(["./BaseController","sap/ui/model/json/JSONModel","sap/ui/core/message/ControlMessageProcessor","sap/m/MessageBox","sap/ui/core/MessageType","sap/ui/core/ValueState"],function(e,t,s,a,r,i,o){"use strict";return e.extend("zdashboard.controller.App",{onInit:function(){var e,a,n=this.getView().getBusyIndicatorDelay();e=new t({busy:true,delay:0,selectedItem:"main",paramsExpanded:true,sideBarExpanded:true,breadcrumbLinks:[{}],layout:"TwoColumnsBeginExpanded",isEditable:false,bProcessFlowVisible:true,isFullPage:true});this.setModel(e,"appView");a=function(){e.setProperty("/busy",false);e.setProperty("/delay",n)};const d=this.getOwnerComponent().getModel();d.getMetaModel().requestObject("/").then(function(){a()},function(){a()});this.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass());var g=new s;var u=sap.ui.getCore().getMessageManager();u.registerMessageProcessor(g);sap.ui.getCore().attachValidationError(function(e){var t=e.getParameter("element");var s=e.getParameter("message");var a=sap.ui.getCore().byId(t.getId());a.setValueState(o.Error);debugger;u.addMessages(new r({message:s,type:i.Error,target:"/name",processor:g}))});this.getRouter().attachRouteMatched(this._onRouteMatched.bind(this))},onItemSelect:function(e){this.getView().setBusy(true);var t=e.getParameter("item").getKey();if(t==="files"){this._toggleItemExpand()}function s(){this.getRouter().navTo(t);this.getView().setBusy(false)}if(this.getModel().hasPendingChanges()){a.confirm("Unsaved data will be lost.",{onClose:function(e){if(e==a.Action.OK){this.getModel().resetChanges();s.call(this)}}.bind(this)})}else{s.call(this);this.getView().setBusy(false)}},_onRouteMatched:function(e){this._updateBreadcrumbs(e.getParameter("config").pattern)},_updateBreadcrumbs:function(e){var t=[{key:"main",text:this.getResourceBundle().getText("main")}];var s=e.replace(/\/\:.+\:/,"");var a=s.split("/");a.pop();for(var r in a){t.push({key:a[r],text:this.getResourceBundle().getText(a[r])})}this.getModel("appView").setProperty("/breadcrumbLinks",t)},_toggleItemExpand:function(){var e=this.getModel("appView").getProperty("/paramsExpanded");this.getModel("appView").setProperty("/paramsExpanded",!e)},onMenu:function(){var e=this.getModel("appView").getProperty("/sideBarExpanded");this.getModel("appView").setProperty("/sideBarExpanded",!e)}})});
//# sourceMappingURL=App.controller.js.map